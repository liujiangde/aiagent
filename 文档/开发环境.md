目标
- 统一 Node 版本到 20，并与 CI 保持一致
- 通过可选 Docker 开发环境实现跨平台一致性

Node 版本要求
- 根 `package.json` 已声明：
  - `engines.node: ">=20"`
- 本地推荐使用 `nvm`：`nvm install 20 && nvm use 20`

环境变量
- 本地：`apps/web/.env.local`（示例：`OPENAI_API_KEY=xxxx` 或 `DEEPSEEK_API_KEY=xxxx`）
- 服务器端读取：`process.env.OPENAI_API_KEY`
- 前端仅暴露非敏感变量：使用 `NEXT_PUBLIC_*`

可选 Docker 开发方式
- 构建命令（需在仓库根执行并挂载代码）：
  - `docker run --rm -it -p 3000:3000 -v "$PWD":/app -w /app node:20 sh -c "npm ci && npm run dev -w apps/web"`
- 或使用 `Dockerfile.dev`：
  - `docker build -t aiagent-dev -f Dockerfile.dev .`
  - `docker run --rm -it -p 3000:3000 -v "$PWD":/app aiagent-dev`

注意事项
- 只使用 `npm` 与 `package-lock.json`，不混用包管理器
- Apple Silicon 使用 arm64 原生 Node，不使用 Rosetta x64
- 不在前端暴露敏感密钥；生产密钥由部署平台注入
- 使用 DeepSeek 时，服务端路由 `/api/deepseek` 读取 `DEEPSEEK_API_KEY` 并转发调用，避免在浏览器中暴露密钥